{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/blocks/gallery-masonry/responsive-block-editor-addons-lightbox.js"],"names":["lightboxModals","document","getElementsByClassName","Array","from","forEach","lightbox","index","className","renderLightboxModal","lightboxIndex","wrapper","createElement","setAttribute","wrapperBackground","modalHeading","close","counter","imageContainer","image","caption","arrowLeftContainer","arrowRightContainer","arrowRight","arrowLeft","images","querySelectorAll","captions","append","length","getElementsByTagName","remove","captionElem","captionIndex","addEventListener","changeImage","img","imgIndex","closest","style","display","getImageCaption","elem","selector","sibling","nextElementSibling","matches","innerHTML","imagePreloader","preloaded","setPreloadImages","window","Image","src","attributes","value","setKeyboardListener","imageIndex","backgroundImage","textContent","onkeydown","e","lightboxDisplayValue","lightboxIsOpen","event","keyCode","click"],"mappings":"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","file":"responsive-block-editor-addons-lightbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/blocks/gallery-masonry/responsive-block-editor-addons-lightbox.js\");\n","(function () {\n  \"use strict\";\n\n  const lightboxModals = document.getElementsByClassName(\"has-lightbox\");\n\n  Array.from(lightboxModals).forEach(function (lightbox, index) {\n    lightbox.className += \" lightbox-\" + index + \" \";\n    renderLightboxModal(index);\n  });\n\n  function renderLightboxModal(lightboxIndex) {\n    const wrapper = document.createElement(\"div\");\n    wrapper.setAttribute(\"class\", \"responsive-block-editor-addons-lightbox\");\n\n    const wrapperBackground = document.createElement(\"div\");\n    wrapperBackground.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__background\"\n    );\n\n    const modalHeading = document.createElement(\"div\");\n    modalHeading.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__heading\"\n    );\n\n    const close = document.createElement(\"button\");\n    close.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__close\"\n    );\n\n    const counter = document.createElement(\"span\");\n    counter.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__count\"\n    );\n\n    const imageContainer = document.createElement(\"div\");\n    imageContainer.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__image\"\n    );\n\n    const image = document.createElement(\"img\");\n\n    const caption = document.createElement(\"figcaption\");\n    caption.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__caption\"\n    );\n\n    const arrowLeftContainer = document.createElement(\"button\");\n    arrowLeftContainer.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__arrow responsive-block-editor-addons-lightbox__arrow--left\"\n    );\n\n    const arrowRightContainer = document.createElement(\"button\");\n    arrowRightContainer.setAttribute(\n      \"class\",\n      \"responsive-block-editor-addons-lightbox__arrow responsive-block-editor-addons-lightbox__arrow--right\"\n    );\n\n    const arrowRight = document.createElement(\"div\");\n    arrowRight.setAttribute(\"class\", \"arrow-right\");\n\n    const arrowLeft = document.createElement(\"div\");\n    arrowLeft.setAttribute(\"class\", \"arrow-left\");\n\n    const images = document.querySelectorAll(\n      `.has-lightbox.lightbox-${lightboxIndex} > :not(.carousel-nav) figure img, figure.has-lightbox.lightbox-${lightboxIndex} > img`\n    );\n    const captions = document.querySelectorAll(\n      `.has-lightbox.lightbox-${lightboxIndex} > :not(.carousel-nav) figure figcaption`\n    );\n    let index;\n\n    modalHeading.append(counter, close);\n\n    imageContainer.append(image, caption);\n    arrowLeftContainer.append(arrowLeft);\n    arrowRightContainer.append(arrowRight);\n\n    wrapper.append(\n      wrapperBackground,\n      modalHeading,\n      imageContainer,\n      arrowLeftContainer,\n      arrowRightContainer\n    );\n\n    if (images.length > 0) {\n      document.getElementsByTagName(\"BODY\")[0].append(wrapper);\n      if (images.length === 1) {\n        arrowRightContainer.remove();\n        arrowLeftContainer.remove();\n      }\n    }\n\n    if (captions.length > 0) {\n      Array.from(captions).forEach(function (captionElem, captionIndex) {\n        captionElem.addEventListener(\"click\", function () {\n          changeImage(captionIndex);\n        });\n      });\n    }\n\n    Array.from(images).forEach(function (img, imgIndex) {\n      img.closest(\"figure\").addEventListener(\"click\", function () {\n        changeImage(imgIndex);\n      });\n    });\n\n    arrowLeftContainer.addEventListener(\"click\", function () {\n      index = index === 0 ? images.length - 1 : index - 1;\n      if (wrapper.style.display === \"flex\") changeImage(index);\n    });\n\n    arrowRightContainer.addEventListener(\"click\", function () {\n      index = index === images.length - 1 ? 0 : index + 1;\n      if (wrapper.style.display === \"flex\") changeImage(index);\n    });\n\n    wrapperBackground.addEventListener(\"click\", function () {\n      wrapper.style.display = \"none\";\n    });\n\n    close.addEventListener(\"click\", function () {\n      wrapper.style.display = \"none\";\n    });\n\n    function getImageCaption(elem) {\n      const selector = \"figcaption\";\n      let sibling = elem.nextElementSibling;\n\n      // If the sibling matches our selector, use it\n      // If not, jump to the next sibling and continue the loop\n      while (sibling) {\n        if (sibling.matches(selector)) {\n          return sibling.innerHTML;\n        }\n        sibling = sibling.nextElementSibling;\n      }\n      return \"\";\n    }\n\n    const imagePreloader = {\n      preloaded: false,\n      setPreloadImages: () => {\n        if (!imagePreloader.preloaded) {\n          imagePreloader.preloaded = true;\n          Array.from(images).forEach(function (img, imgIndex) {\n            imagePreloader[`img-${imgIndex}`] = new window.Image();\n            imagePreloader[`img-${imgIndex}`].src = img.attributes.src.value;\n            imagePreloader[`img-${imgIndex}`][\"data-caption\"] =\n              images[imgIndex] && images[imgIndex].nextElementSibling\n                ? getImageCaption(images[imgIndex])\n                : \"\";\n          });\n          setKeyboardListener();\n        }\n      },\n    };\n\n    function changeImage(imageIndex) {\n      imagePreloader.setPreloadImages();\n      index = imageIndex;\n      wrapper.style.display = \"flex\";\n      wrapperBackground.style.backgroundImage = `url(${\n        imagePreloader[`img-${index}`].src\n      })`;\n      image.src = imagePreloader[`img-${index}`].src;\n      caption.innerHTML = imagePreloader[`img-${index}`][\"data-caption\"];\n      counter.textContent = `${index + 1} / ${images.length}`;\n    }\n\n    function setKeyboardListener() {\n      document.onkeydown = function (e) {\n        const lightboxDisplayValue = wrapper;\n        const lightboxIsOpen =\n          typeof lightboxDisplayValue !== \"undefined\" &&\n          lightboxDisplayValue !== \"none\";\n        if (lightboxIsOpen) {\n          e = e || window.event;\n          switch (e.keyCode) {\n            case 27: // Esc key\n              close.click();\n              break;\n            case 37: // Arrow left or 'A' key.\n              arrowLeftContainer.click();\n              break;\n            case 65: // 'A' key.\n              arrowLeftContainer.click();\n              break;\n            case 39: // Arrow right.\n              arrowRightContainer.click();\n              break;\n            case 68: // 'D' key.\n              arrowRightContainer.click();\n              break;\n          }\n        }\n      };\n    }\n  }\n})();\n"],"sourceRoot":""}